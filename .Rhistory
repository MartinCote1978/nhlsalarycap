suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
for(i in 1:length(teams)) {
team_name <- teams[i]
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
nhl_salaries <- nhl_salaries %>%
union(team_salaries)
}
nhl_salaries
for(i in 1:length(teams)) {
team_name <- teams[i]
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
#  nhl_salaries <- nhl_salaries %>%
#    union(team_salaries)
}
data_folder <- "data-"
prefix <- "nhlsalarycap-"
suffix_contracts <- "-contracts-"
suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
readTeamInfo <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamInfo(teams[1])
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamInfo(teams[i]))
}
View(nhl_salaries)
nhl_salaries <- readTeamInfo(teams[1])
nhl_salaries2 <- readTeamInfo(teams[2])
nhlsal <- union(nhl_salaries, nhl_salaries2)
View(nhl_salaries)
View(nhl_salaries2)
names(nhl_salaries) == names(nhl_salaries2)
nhlsal <- union(nhl_salaries, nhl_salaries2)
nhlsal <- union(nhl_salaries, nhl_salaries2)
nhl_salaries
nhl_salaries
nhl_salaries2
nhl_salaries <- readTeamInfo(teams[1])
library(dplyr)
library(tidyr)
data_folder <- "data-"
prefix <- "nhlsalarycap-"
suffix_contracts <- "-contracts-"
suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
readTeamInfo <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamInfo(teams[1])
nhl_salaries2 <- readTeamInfo(teams[2])
View(nhl_salaries)
View(nhl_salaries2)
nhlsal <- union(nhl_salaries, nhl_salaries2)
nhlsal <- bind_rows(nhl_salaries, nhl_salaries2)
View(nhl_salaries)
View(nhl_salaries2)
str(nhl_salaries)
str(nhl_salaries2)
nhl_salaries3 <- readTeamInfo(teams[3])
str(nhl_salaries3)
nhlsal <- bind_rows(nhl_salaries, nhl_salaries3)
nhlsal <- union(nhl_salaries, nhl_salaries3)
data_folder <- "data-"
prefix <- "nhlsalarycap-"
suffix_contracts <- "-contracts-"
suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
readTeamInfo <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamInfo(teams[1])
for(i in 3:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamInfo(teams[i]))
}
data_folder <- "data-"
prefix <- "nhlsalarycap-"
suffix_contracts <- "-contracts-"
suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
readTeamSrcData <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamSrcData(teams[1])
names(nhl_salaries)
classes(nhl_salaries)
str(nhl_salaries)
readTeamSrcData <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", "character", "integer", "integer", "character", "character", "character"),
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamSrcData(teams[1])
nhl_salaries2 <- readTeamSrcData(teams[2])
nhl_salaries3 <- readTeamSrcData(teams[3])
union(nhl_salaries, nhl_salaries2, nhl_salaries3)
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
readTeamSrcData <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", "character", "character", "character", "character", "character", "character", "character"),
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", "character", "integer", "integer", "character", "character", "character"),
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamSrcData(teams[1])
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
teams[14]
nhl_salaries <- readTeamSrcData(teams[1])
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
teams[19]
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
teams[21]
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
teams[22]
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
teams[29]
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
View(nhl_salaries)
View(nhl_salaries2)
nhl_salaries["arizona",]
nhl_salaries[, "arizona"]
nhl_salaries[TEAM=="arizona",]
filter(nhl_salaries, TEAM=="arizona")
tst <- filter(nhl_salaries, TEAM=="arizona")
View(tst)
tst <- readTeamSrcData("montreal")
View(tst)
tst <- readTeamSrcData("arizona")
nhl_salaries <- readTeamSrcData(teams[1])
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
tst <- filter(nhl_salaries, TEAM=="montreal")
tst <- filter(nhl_salaries, TEAM=="arizona")
View(nhl_salaries)
nhl_salaries
data_folder <- "data-"
prefix <- "nhlsalarycap-"
suffix_contracts <- "-contracts-"
suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
readTeamSrcData <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", "character", "character", "character", "character", "character", "character", "character"),
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", "character", "integer", "integer", "character", "character", "character"),
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
nhl_salaries <- readTeamSrcData(teams[1])
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
nhl_salaries
nhl_salaries <- readTeamSrcData(teams)
data_folder <- "data-"
prefix <- "nhlsalarycap-"
suffix_contracts <- "-contracts-"
suffix_peryear <- "-peryear-"
data_date <- "2015-02-23"
teams <- c("anaheim", "arizona", "boston", "buffalo", "calgary", "carolina", "chicago", "colorado",
"columbus", "dallas", "detroit", "edmonton", "florida", "losangeles", "minnesota", "montreal",
"nashville", "newjersey", "nyislanders", "nyrangers", "ottawa", "philadelphia", "pittsburgh",
"sanjose", "stlouis", "tampabay", "toronto", "vancouver", "washington", "winnipeg")
readTeamSrcData <- function(team_name) {
team_peryear <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_peryear,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", # PLAYER
"character", # POS
"character", # 2014
"character", # 2015
"character", # 2016
"character", # 2017
"character", # 2018
"character"), # X
stringsAsFactors=FALSE)
)
team_contracts <- tbl_df(read.csv(file=paste("./",
data_folder,
data_date,
"/",
prefix,
team_name,
suffix_contracts,
data_date,
".csv",
sep=""),
header=TRUE,
colClasses=c("character", # PLAYER
"character", # POS
"integer", # AGE
"integer", # EXP.
"character", # CONTRACT TERMS
"character", # AVG. SALARY
"character"), # EXPIRES
stringsAsFactors=FALSE)
)
team_salaries <- team_peryear %>%
left_join(team_contracts, by="PLAYER") %>%
mutate(TEAM = team_name)
team_salaries
}
for(i in 1:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
nhl_salaries <- readTeamSrcData(teams[1])
for(i in 2:length(teams)) {
nhl_salaries <- nhl_salaries %>% union(readTeamSrcData(teams[i]))
}
nhl_salaries
tst <- filter(nhl_salaries, PLAYER=="Carey Price")
filter(nhl_salaries, PLAYER=="Carey Price")
filter(nhl_salaries, PLAYER=="P.K. Subban")
filter(nhl_salaries, PLAYER=="Sidney Crosby")
filter(nhl_salaries, PLAYER=="Rick Nash")
filter(nhl_salaries, PLAYER in c("Rick Nash", "Carey Price", "P.K. Subban", "Sidney Crosby"))
filter(nhl_salaries, PLAYER %in% c("Rick Nash", "Carey Price", "P.K. Subban", "Sidney Crosby"))
